Timing and solver convergence info developed while working on
[#701 (Add support for PETSc solvers)](https://github.com/usnistgov/fipy/pull/701).

## INSTALLATION

- Create conda environment for snakemake:

    `mamba env create --file workflow/envs/snakemake.yml`

- Create conda benchmarking environments:

    - For any given solver suite "`<SUITE>`":

        `mamba env create --name benchmark_<SUITE> --file <PATH_TO_FIPY>/environments/<SUITE>--environment.yml`
      
    - Activate the environment:

        `mamba activate benchmark_<SUITE>`

    - Install a working copy of FiPy:

        `python -m pip install --editable <PATH_TO_FIPY>`

    - Install steppyngstounes

        `python -m pip install --editable <PATH_TO_STEPPYNGSTOUNES>`
  
- Create analysis environment

    - Make the environment
    
        `mamba env create --file workflow/envs/analysis.yml`
        
    - Activate the environment:

        `mamba activate benchmark_analysis`

    - Install the supporting package for this project:

        `python -m pip install --editable .`

## USAGE

### Simulations

Notebooks for simulating different problems can be found in
`codes/notebooks/*.ipynb`.  These notebooks can be run on their own, but
are primarily intended to be batch-processed by
[Snakemake](https://snakemake.readthedocs.io/), e.g., from the base
directory of this repository:

```bash
snakemake --use-conda ???
```

Progress can be tracked by launching
[panoptes](https://github.com/panoptes-organization/panoptes) and invoking
`snakemake` with the `--wms-monitor` option.

### Retrieving results

Bring results from CTCMS to laptop with

```bash
rsync -avzh  mr-french.nist.gov:/data/guyer/solvers_and_timings/results .
```

### Analyses

Notebooks for anaysis of results can be found in `codes/notebooks/analyze_*.ipynb`.
These notebooks should be self-contained.

### Aggregating

## DATA & FILE OVERVIEW

```
./
├── LICENSE.md
│    { Terms of use.
├── README.md
│    { Description of `solvers_and_timings/`.
├── Snakefile
├── TODO.md
│    { Tasks to work on.
├── petsc_matrix.ipynb
├── pyproject.toml
│    { Package metadata for Py3k.
├── setup.py
│    { Package installer for Py27.
├── codes/
│    { Runnable programs.
│   ├── notebooks/
│   │    { [Jupyter](https://jupyter.org/) notebook files.
│   └── scripts/
│        { Python and bash programs.
├── data/
│    { Data used by notebooks.
│   └── matrices/
│        ⎧ Exemplars of matrix structure for different problems.
│        ⎩ Generated by `codes/notebooks/analyze_*.ipynb` notebooks.
├── environments/
│    { Conda environment files.
│   ├── analysis_environment.yml
│   ├── environment_27.yml
│   └── environment_3x.yml
├── results/
│    { Simulation results.
│   ├── 77c27bb/
│   ├── be20df7/
│   └── e2224cb/
├── results.old/
│   ├── 77c27bb/
│   ├── be20df7/
│   ├── binary/
│   │    ⎧ Results from `codes/notebooks/binary_phase_field.ipynb`.
│   │    ⎩ Binary diffusion in a frozen phase field.
│   ├── diffusion/
│   │    ⎧ Results from `codes/notebooks/diffusion.ipynb`.
│   │    ⎩ Diffusion in a 2D field.
│   ├── nucleation/
│   │    ⎧ Results from `codes/notebooks/nucleation.ipynb`
│   │    ⎩ (using Phase Field Benchmark 8(b)).
│   └── old/
│        { old stuff
└── src/
     { Analysis package.
    ├── fipy_solver_benchmarking/
    └── fipy_solver_benchmarking.egg-info/
```

(generated with `tree -FL 2 --info --filesfirst .`)

### DATA-SPECIFIC INFORMATION FOR: *.csv

[Comma-separated value](https://en.wikipedia.org/wiki/Comma-separated_values)-formatted
delimited text.

### DATA-SPECIFIC INFORMATION FOR: .info

[`tree` command file comment file](https://en.wikipedia.org/wiki/Tree_(command))-formatted text.

### DATA-SPECIFIC INFORMATION FOR: *.ipynb

[Jupyter notebook](https://nbformat.readthedocs.io/en/latest/format_description.html#notebook-file-format)-formatted
text.

### DATA-SPECIFIC INFORMATION FOR: *.json

[JavaScript Object Notation](https://www.json.org/)-formatted text.

### DATA-SPECIFIC INFORMATION FOR: *.log

[Python event log](https://docs.python.org/3/library/logging.html).

### DATA-SPECIFIC INFORMATION FOR: *.md

[Markdown](https://daringfireball.net/projects/markdown/)-formatted text.

### DATA-SPECIFIC INFORMATION FOR: *.mtx

[Matrix Market](https://math.nist.gov/MatrixMarket/formats.html)-formatted
text.

### DATA-SPECIFIC INFORMATION FOR: *.npy

[NumPy array](https://numpy.org/doc/stable/reference/generated/numpy.lib.format.html#module-numpy.lib.format)-formatted
binary.

### DATA-SPECIFIC INFORMATION FOR: *.npz

A [NumPy zipped archive of files](https://numpy.org/doc/stable/reference/generated/numpy.savez.html)
named after the variables they contain.  The archive is not compressed and
each file in the archive contains one variable in
[`.npy`](https://numpy.org/doc/stable/reference/generated/numpy.lib.format.html#module-numpy.lib.format)
format.

### DATA-SPECIFIC INFORMATION FOR: *.py

[Python code](https://python.org)-formatted text.

### DATA-SPECIFIC INFORMATION FOR: *.sh

[Bash script](https://en.wikipedia.org/wiki/Bash_(Unix_shell))-formatted text.

### DATA-SPECIFIC INFORMATION FOR: *.txt

Should be `.tsv` or `.csv`?
